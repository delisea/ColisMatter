{"version":3,"sources":["meteor://ðŸ’»app/client/coList/coList.js","meteor://ðŸ’»app/client/connectform/connectform.js","meteor://ðŸ’»app/client/deviceList/deviceList.js","meteor://ðŸ’»app/client/homeTemplate/homeTemplate.js","meteor://ðŸ’»app/client/navBar/navBar.js","meteor://ðŸ’»app/client/main.js","meteor://ðŸ’»app/lib/main.js"],"names":["Template","coList","events","event","t","$","currentTarget","parent","toggleClass","console","log","target","getAttribute","$target","css","fadeIn","helpers","currentUserId","Meteor","userId","CoListe","find","proprietaire","dest","it","Accounts","module","import","v","click","e","delay","fadeOut","removeClass","addClass","preventDefault","connectform","username","value","mdp","password","loginWithPassword","error","id","cmdp","email","createUser","deviceList_Selected","deviceList","Devices","state","name","Session","get","set","startup","window","resize","Markers","Collection","subscribe","map","markers","geoFitBounds","bbox","b","L","latLngBounds","pb","bounds","project","getSouthWest","getNorthEast","z","getBoundsZoom","c","getCenter","pc","unproject","setView","supportsOrientationChange","orientationEvent","addEventListener","getBounds","pad","homeTemplate","rendered","Icon","Default","imagePath","insert","latlng","latLng","doubleClickZoom","outerHeight","tileLayer","provider","addTo","on","markerClusterGroup","addLayer","query","observe","added","document","marker","removeLayer","remove","_id","removed","oldDocument","layers","_layers","key","val","_latlng","lat","lng","navBar","last","age","logout","reason","registerHelper","page","ReactiveVar","setDefault","call","packagename","tag","depart","destination","itineraire","date","valide","Mongo"],"mappings":"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","file":"/app.js","sourcesContent":["/*$(document).ready(function () {\r\n\r\n    $('.ckbox label').on('click', function () {\r\n      $(this).parents('tr').toggleClass('selected');\r\n    });\r\n\r\n    $('.btn-filter').on('click', function () {\r\n      var $target = $(this).data('target');\r\n\t  console.log($target);\r\n      if ($target != 'all') {\r\n        $('.table tr').css('display', 'none');\r\n        $('.table tr[data-status=\"' + $target + '\"]').fadeIn('slow');\r\n      } else {\r\n        $('.table tr').css('display', 'none').fadeIn('slow');\r\n      }\r\n    });\r\n\r\n });*/\r\n\r\nTemplate.coList.events({\r\n\t'click .ckbox label': function(event, t){\r\n\t\t//console.log(event.target);\r\n\t\t//event.target.parents('tr').toggleClass('selected');\r\n\t\t$(event.currentTarget).parent().parent().parent().toggleClass('selected');\r\n\t},\r\n\t'click .btn-filter': function(event, t){\r\n\t\tconsole.log(\"ON\" + event.target.getAttribute('data-target'));\r\n\t\tvar $target = event.target.getAttribute('data-target');\r\n\t\tif ($target != 'tous') {\r\n\t\t\t$('.table tr').css('display', 'none');\r\n\t\t\t$('.table tr[data-status=\"' + $target + '\"]').fadeIn('slow');\r\n\t\t} else {\r\n\t\t\t$('.table tr').css('display', 'none').fadeIn('slow');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nTemplate.coList.helpers({\r\n\t'colis': function(){\r\n\t\tvar currentUserId = Meteor.userId();\r\n\t\treturn CoListe.find({ proprietaire: 0});\r\n\t\t\r\n\t\t\t/*name: \"ArduinoBoard\",\r\n\t\t\ttag: \"QRTag\",\r\n\t\t\tdepart: [62.9, 66.4],\r\n\t\t\tdestination: [66.4, 69.6],\r\n\t\t\titineraire: [66.4, 69.6],\r\n\t\t\tdate: \"01/04/2017 17:20\",\r\n\t\t\tproprietaire: 0,\r\n\t\t\tvalide: false*/\r\n\t},\r\n\t'delivered': function(dest, it) {\r\n\t\tif(dest[0] == it[0] && dest[1] == it[1]) {\r\n\t\t\treturn \"livre\";\r\n\t\t}\r\n\t\treturn \"transit\";\r\n\t}\r\n});","import { Accounts } from 'meteor/accounts-base';\r\n\r\n/*Template.registerHelper( 'isConnected', (page) => {\r\n  return Session.get('connected');\r\n});*/\r\n\r\n\r\n$(function() {\r\n\r\n    $('#login-form-link').click(function(e) {\r\n\t\t$(\"#login-form\").delay(100).fadeIn(100);\r\n \t\t$(\"#register-form\").fadeOut(100);\r\n\t\t$('#register-form-link').removeClass('active');\r\n\t\t$(this).addClass('active');\r\n\t\te.preventDefault();\r\n\t});\r\n\t$('#register-form-link').click(function(e) {\r\n\t\t$(\"#register-form\").delay(100).fadeIn(100);\r\n \t\t$(\"#login-form\").fadeOut(100);\r\n\t\t$('#login-form-link').removeClass('active');\r\n\t\t$(this).addClass('active');\r\n\t\te.preventDefault();\r\n\t});\r\n\r\n});\r\n\r\nTemplate.connectform.events({\r\n\t'submit #login-form': function(e){\r\n\t\te.preventDefault();\r\n\t\tvar username = e.target.username.value;\r\n\t\tvar mdp = e.target.password.value;\r\n\t\tMeteor.loginWithPassword(username, mdp, function(error){\r\n          console.log(error);\r\n        });\r\n\t\t//Session.set('connected', true);\r\n\t},\r\n\t'submit #register-form': function(e){\r\n\t\tconsole.log(e.target.id);\r\n\t\te.preventDefault();\r\n\t\tvar username = e.target.username.value;\r\n\t\tvar mdp = e.target.password.value;\r\n\t\tvar cmdp = e.target[\"confirm-password\"].value;\r\n\t\tvar email = e.target.password.value;\r\n\t\tif(cmdp !== mdp) {\r\n\t\t\tconsole.log(\"mdp pas bon\");\r\n\t\t\tconsole.log(mdp);\r\n\t\t\tconsole.log(cmdp);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tAccounts.createUser({\r\n            username: username,\r\n            email: email,\r\n            password: mdp\r\n          },function(error){console.log(\"error\");if(error)console.log(error);});\r\n\t\t  console.log(\"done\");\r\n\t}\r\n});","var deviceList_Selected = \"\";\r\nTemplate.deviceList.helpers({\r\n\t'devices': function(){\r\n\t\treturn Devices.find({});\r\n\t},\r\n\t'isStarted': function (state) {\r\n\t\treturn state === \"Started\";\r\n\t},\r\n\t'isWaiting': function (state) {\r\n\t\treturn state === \"Initializing\";\r\n\t},\r\n\t'isClosed': function (state) {\r\n\t\treturn state === \"Not started\";\r\n\t},\r\n\t'isSelected': function (name) {console.log(deviceList_Selected);\r\n\t\treturn name === Session.get('deviceList_Selected');\r\n\t}\r\n});\r\nTemplate.deviceList.events({\r\n  'click .ONdevice': function(event){\r\n\t\tconsole.log(\"ON\" + event.target.getAttribute('data-targetname'));\r\n\t\t//alert(\"ON \" + event.target.getAttribute('data-targetname'));\r\n\t},\r\n\t'click .OFFdevice': function(event){\r\n\t\t//alert(\"OFF \" + event.target.getAttribute('data-targetname'));\r\n\t\tconsole.log(\"OFF\" + event.target.getAttribute('data-targetname'));\r\n\t},\r\n\t'click .INFOdevice': function(event){\r\n\t\tif(event.target.getAttribute('data-targetname') !== Session.get('deviceList_Selected'))\r\n\t\t\tSession.set('deviceList_Selected', event.target.getAttribute('data-targetname'));\r\n\t\telse\r\n\t\t\tSession.set('deviceList_Selected', \"\");\r\n\t}\r\n});","Meteor.startup(function() {\r\n  /*$(window).resize(function() {\r\n    $('#map').css('height', window.innerHeight - 82 - 45);\r\n  });*/\r\n  $(window).resize(); // trigger resize event \r\n});\r\n \r\n// create marker collection\r\nvar Markers = new Meteor.Collection('markers');\r\n\r\nMeteor.subscribe('markers');\r\nvar map;\r\nvar markers;\r\n\r\nvar geoFitBounds = function(map, bbox) {\r\n        var b = L.latLngBounds(bbox);\r\n            pb = L.bounds(map.project(b.getSouthWest()), map.project(b.getNorthEast())),\r\n            z = map.getBoundsZoom(b),\r\n            c = b.getCenter(),\r\n            pc = map.unproject(pb.getCenter());\r\n\r\n        map.setView(pc, z);\r\n        return map;\r\n    };\r\n\r\nvar supportsOrientationChange = \"onorientationchange\" in window,\r\n    orientationEvent = supportsOrientationChange ? \"orientationchange\" : \"resize\";\r\n\r\nwindow.addEventListener(orientationEvent, function() {\r\n    //console.log('HOLY ROTATING SCREENS BATMAN:' + window.orientation + \" \" + screen.width);\r\n\t\r\n\t/*map.fitBounds([\r\n\t\t[45.1667, 5.7667],\r\n\t\t[45.184394, 5.752884]\r\n\t], {paddingTopLeft: [0, $(\".table-cell\").outerHeight()]});*/\r\n\t//map.fitBounds(markers.getBounds().pad(0.5));\r\n\t//console.log($(\".table-cell\").outerHeight());\r\n\t/*console.log($(\"#map\").outerHeight());\r\n\tmap.fitBounds(markers.getBounds().pad(0.25));*/\r\n\t\r\n\tgeoFitBounds(map, markers.getBounds().pad(1));\r\n}, false);\r\n\r\nTemplate.homeTemplate.rendered = function() {\r\n  L.Icon.Default.imagePath = '/packages/bevanhunt_leaflet/images/';\r\n  \r\n  Markers.insert({latlng: L.latLng(45.1667, 5.7667)});\r\n  Markers.insert({latlng: L.latLng(45.184394, 5.752884)});\r\n\r\n  map = L.map('map', {\r\n    doubleClickZoom: false\r\n  });//.setView([49.25044, -123.137], 13);\r\n\t//console.log();\r\n  \r\n  /*map.fitBounds([\r\n\t\t[45.1667, 5.7667],\r\n\t\t[45.184394, 5.752884]\r\n\t], {paddingTopLeft: [0, $(\".table-cell\").outerHeight()]});*/\r\n\t\r\n\tconsole.log($(\".table-cell\").outerHeight());\r\n\t\r\n\r\n  L.tileLayer.provider('OpenStreetMap.Mapnik').addTo(map);\r\n\r\n  map.on('dblclick', function(event) {\r\n    Markers.insert({latlng: event.latlng});\r\n  });\r\n\r\n  // add clustermarkers\r\n  markers = L.markerClusterGroup();\r\n  map.addLayer(markers);\r\n\r\n  var query = Markers.find();\r\n  query.observe({\r\n    added: function (document) {\r\n      var marker = L.marker(document.latlng).addTo(map)\r\n        .on('click', function(event) {\r\n          map.removeLayer(marker);\r\n          Markers.remove({_id: document._id});\r\n        });\r\n       markers.addLayer(marker);\r\n    },\r\n    removed: function (oldDocument) {\r\n      layers = map._layers;\r\n      var key, val;\r\n      for (key in layers) {\r\n        val = layers[key];\r\n        if (val._latlng) {\r\n          if (val._latlng.lat === oldDocument.latlng.lat && val._latlng.lng === oldDocument.latlng.lng) {\r\n            //map.removeLayer(val);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\tgeoFitBounds(map, markers.getBounds().pad(1));\r\n};","Template.navBar.helpers({\r\n\t/*'isPage': function(page){\r\n\t\treturn page === Session.get('page');\r\n\t},*/\r\n\t'objectInArray': function() {\r\n\t\treturn [\r\n\t\t\t{name:\"Home\",last:\"Home\",age:100},\r\n\t\t\t{name:\"Colis\",last:\"page1\",age:200},\r\n\t\t\t{name:\"Devices\",last:\"page2\",age:200},\r\n\t\t\t{name:\"Disconnect\",last:\"page2\",age:200}\r\n\t\t];\r\n\t}\r\n});\r\n\r\nTemplate.navBar.events({\r\n  'click .navLink': function(event){\r\n\t\tif(event.target.getAttribute('data-targetname') === \"Disconnect\") {\r\n\t\t\tMeteor.logout(function(error) {\r\n\t\t\t\tif(error)\r\n\t\t\t\t\tconsole.log(error.reason);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t\tSession.set('page', event.target.getAttribute('data-targetname'));\r\n\t}\r\n});\r\n\r\nTemplate.registerHelper( 'isPage', (page) => {\r\n  return page === Session.get('page');\r\n});","import { Template } from 'meteor/templating';\r\nimport { ReactiveVar } from 'meteor/reactive-var';\r\nimport { Meteor } from 'meteor/meteor';\r\n\r\nimport './main.html';\r\n\r\nSession.setDefault('deviceList_Selected', \"\");\r\n\n///TODO fix navBar responsivess\n\n\n// TODO:\n// Remember me?\n// Forgot password\r\n// after disco can't register\r\n// table des suivis\n\n// do better startup()\n// Global for( fct in Meteor.perso.startup) fct();    ???\n\r\nMeteor.startup(() => {\n\t\tSession.set('connected', false);\n\t\tSession.set('page', 'Home');\r\n\t\tMeteor.call('removeAllPosts');\r\n\t\tMeteor.call('removeAllColis');\r\n\t\tDevices.insert({name: \"device1\", state: \"Started\", packagename: \"com...\"});\r\n\t\tDevices.insert({name: \"device2\", state: \"Started\", packagename: \"com2...\"});\r\n\t\tDevices.insert({name: \"device3\", state: \"Not started\", packagename: \"com3...\"});\r\n\t\tDevices.insert({name: \"device4\", state: \"Not started\", packagename: \"com4...\"});\r\n\t\tDevices.insert({name: \"device5\", state: \"Initializing\", packagename: \"com5...\"});\r\n\t\t\r\n\t\t/*CoListe.insert({name: \"ArduinoPackage\", state: \"Treatment\", lastX: 52.9, lastY: 56.4});\r\n\t\tCoListe.insert({name: \"AnotherPackage\", state: \"Treatment\", lastX: 56.4, lastY: 59.6});*/\r\n\t\tCoListe.insert({\r\n\t\t\tname: \"ArduinoBoard\",\r\n\t\t\ttag: \"QRTag\",\r\n\t\t\tdepart: [52.9, 56.4],\r\n\t\t\tdestination: [56.4, 59.6],\r\n\t\t\titineraire: [54.4, 56.6],\r\n\t\t\tdate: \"04/04/2017 17:20\",\r\n\t\t\tproprietaire: 0,\r\n\t\t\tvalide: true\r\n\t\t});\r\n\t\tCoListe.insert({\r\n\t\t\tname: \"ArduinoBoard\",\r\n\t\t\ttag: \"QRTag\",\r\n\t\t\tdepart: [62.9, 66.4],\r\n\t\t\tdestination: [66.4, 69.6],\r\n\t\t\titineraire: [66.4, 69.6],\r\n\t\t\tdate: \"01/04/2017 17:20\",\r\n\t\t\tproprietaire: 0,\r\n\t\t\tvalide: false\r\n\t\t});\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","CoListe = new Mongo.Collection('coliste');\r\nDevices = new Mongo.Collection('devices');"]}